<!DOCTYPE html>
<html>
<head>
    <title>learning reactjs</title>
    <script src="bower_components/react/react.js"></script>
    <script src="bower_components/react/react-dom.js"></script>
    <script src="bower_components/browser.min.js"></script>
</head>
<body>
<div id="app"></div>


<script type="text/babel">

    var MessageBox = React.createClass({
        alertMe:function(){
//            alert("您点击了我一下...");
            //  this.state.isVisable = !this.state.isVisable;
//            var tempState = this.getInitialState();
//            console.log(tempState);
            this.state.clickCount = this.state.clickCount+1;
//            console.log(this.state);
            this.setState(this.state);
//            console.log(this.state.isVisable);
        },
        getInitialState:function(){
            return {
                isVisable:true,
                subMessage:[
                        "你好","我会搬砖","我会花样搬砖","什么样的搬砖都是可以的"
                ]
            }
        },
        render:function(){
            var styleObj = {
                display:this.state.isVisable?"block":"none"
            }
            return (
                    <div>
                    <h1 style={styleObj} onClick={this.alertMe}>{this.props.title}...</h1>
    <div>您一共点击了 {this.state.clickCount}</div>
    <SubMessage messages={this.state.subMessage}/>
    </div>
    )
    }
    });

    var SubMessage = React.createClass({
        propTypes:{messages:React.PropTypes.array.isRequired},
        getDefaultProps:function(){
            return {
                messages:["默认的子消息"]
            }
        },
        render:function(){
            var msgs = [];
            this.props.messages.forEach(function(msg,index){
                msgs.push(
                        <p>码农{index}说：{msg}</p>
                )
            });
            return(
                    <div>{msgs}</div>
            )
        }
    })


    var title = "你好世界....";

    ReactDOM.render(<MessageBox title={title} />,document.getElementById("app"),function(){
        console.log("渲染完成啦~");
    })

</script>

<script type="text/babel">
    //    ReactDOM.render(
    //            <h1>hello world</h1>,
    //            document.getElementById("app")
    //    )
</script>

</body>
</html>